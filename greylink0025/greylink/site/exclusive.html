<HTML><TITLE>greylink - эксклюзивные возможности клиента</TITLE>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251"/>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
<link rel="icon" href="favicon.ico" type="image/x-icon"/>
</head>
<BODY bgcolor=#808080>

Клиент <b>greylink</b> - лидер среди dc++ клиентов, он первый открывает вам
<u>уникальные возможности</u> (которые появятся в других клиентах намного позже):
<hr>

<ul><b>Улучшенная стабильность, низкое потребление ресурсов</b></ul>
Использование процессорного времени при нахождении на хабах
с большим числом юзеров <b>значительно ниже</b> (в сравнении с другими клиентами).
Потребление памяти также <i>немного</i> ниже. Работа над оптимизацией кода продолжается

<a name='tracker'/>
<ul><b>Распределённый трекер в сети dc++</b></ul>
Система публикации файловых релизов, новостей или объявлений.
<a href="tracker.html">Подробнее...</a>

<a name='recover'/>
<ul><b>Восстановление недокачаных или повреждённых файлов</b></ul>
Из меню "Файл" выбирается "Восстановление файла",
указывается правильный MAGNET-линк и расположение поврежденного файла.<br/>
<img src='img/recover.png'/><br/>
Как только будет найден источник (пока "поиск альтернатив" лучше сделать
вручную из очереди закачек, автопоиск долго ждать), будет скачана карта
сегментов файла, произведена проверка сегментов и докачка сегментов, у которых
TTH не совпадает с файлом источника.


<a name='encryption'/>
<ul><b>Шифрование личных сообщений</b></ul>
Возможно шифрование личных сообщений.
Требуется обменяться открытыми ключами (свой публичный ключ можно посмотреть на
странице настроек "Сообщения", публичный ключ другого пользователя нужно внести в его
свойства в окне "Избранные пользователи", для быстрого обмена ключами предусмотрена
команда <b>/key</b>, которая работает с клиентами версии 5.67 и выше).
Сообщение, зашифрованное другим пользователем с помощью Вашего публичного ключа,
можно расшифровать лишь вашим секретным ключом или секретным ключом отправителя.
Администраторы хабов не смогут прочитать зашифрованную переписку.
Расшифрованные сообщения отмечаются красным цветом в метке времени получения.
Для шифрования используется метод <i>Diffie-Hellman</i>-а с длиной ключа 64 бита.

<a name='vshare'/>
<ul><b>Возможность объединить файлы с разных каталогов/дисков в одну папку шары</b></ul>

При расшаривании нескольких папок нужно дать им одинаковое имя в шаре. Таким образом,
файлы (например, фильмы) можно хранить на разных дисках, а для юзера они будут в
одном общем списке. Другое применение: внутреннее разделение файлов (например,
"смотрел", "на запись", "записано" и т.п.) по папкам так, что юзер это в конечном итоге не видит.<br/>

Любой расшариваемый каталог в любой подкаталог шары. Например, отмеченной в шаре папке <b>Heroes_s3</b>
можно дать виртуальное имя <b>Movies/TV-Show/Heroes/Season 3</b> (слешы в другую сторону тоже работают)

<ul><b>Сохранение открытых окон ЛС и выданных слотов при перезапуске клиента</b></ul>

При перезапуске клиента в случае ошибки, или при необходимости временно
отключить файлообменник, история слотов и сообщений восстановится
к моменту следующего запуска. Таким образов, можно смело выдавать слот
на неделю, а также не бояться выйти из сети, оставив ЛС без ответа.

<a name='ntfs'/>
<ul><b>Хранение карты сегментов файла (TTH-дерева) в отдельном NTFS-потоке с именем <font color=blue>.gltth</font></b></ul>

Что это даёт? Не нужно тратить время на повторное хеширование, если:
<ol>1. Завершена скачка большого файла и вы планируете его расшарить</ol>
<ol>2. Большой файл переносится в другое место, или временно убирается из
шары и потом добавляется. Если файл копируется, а не перемещается,
то сохранение потока лежит на совести копировщика
(Windows-проводник и FAR в режиме "Use system copy routine"
сохраняют все потоки)</ol>

Слишком мелкие потоки создавать расточительно из-за выделения места на диске
целыми кластерами, поэтому поток создаётся для файлов размером от 16MB и выше.<br/>

<ul><i>Фича занимает на диске не более 384 килобайт с каждого гигабайта большого файла, отключается в закладке Advanced</i></ul>

<a name='icq'/>
<ul><b>ICQ-бот</b></ul>
Чаты любимых хабов всегда доступны через ICQ.
Кроме того, с помощью ICQ-бота, можно провести приватный чат с пользователем хаба
или поставить magnet-ссылку на закачку (команды бота описаны <a href="icq.html">тут</a>)

<a name='minihub'/>
<ul><b>ADC-Хаб, встроенный в клиент</b></ul>
Может использоваться для создания чат-комнат. Создавший хаб автоматически
становится оператором и может назначать права пользователям:
<br/><b>+set</b> <i>ip-адрес действие</i>
<br/>где действие - ban / unban / op / deop / gag / ungag
<br/>Команда "+info" показывает текущие установки.
Команды на минихаб можно посылать через lua-скрипт

<a name='matchqueue'/>
<ul><b>Улучшен авто-поиск источников</b></ul>
Периодически клиент dc++ посылает поисковые запросы на один из файлов в очереди.<br/>
Пользователи, расшарившие файл, добавляются в список источников файла, у них скачивается
файл-лист и проверяется, нет ли в листе других файлов, тоже находящихся в очереди.<br/>
<font color="#402080"><b>greylink</b>'овский "менеджер файл-листов" расширяет эту функциональность</font>
следующим образом:
<ul>
<li>Ведется история файл-листов, скачанных за последний час.</li>
<li>При нахождении автопоиском файла у некоторого пользователя (например, при добавлении новой закачки в очередь)
проверяется, не качался ли файл-лист пользователя за последний час. Если качался, остальные
файлы ищутся в скачаном листе. Если не качался, файл-лист помещается в очередь закачек.</li>
<li>Если файл найден у одного пользователя на нескольких хабах, скачивается файл-лист только с
одного хаба, к закачке создаются источники с этого пользователя на всех хабах</li>
</ul>

<a name='smartdl'/>
<ul><b>Частично устранена проблема падения скорости к завершению закачки</b></ul>
Все dc++-клиенты (по крайней мере, по состоянию на 24.06.2007), не позволяют докачивать последний сегмент файла
с нескольких пользователей. В <b>greylink</b> этот момент наступает намного позже, тем самым
значительно ускоряется докачка больших файлов (например, DVD-образов). В новых версиях
это направление (улучшение скорости докачки) будет дальше дорабатываться

<a name='dirlink'/>
<ul><b>Создание magnet-ссылок на каталоги</b></ul>

<h5>Способ 1</h5>

В меню "Файл" выбираем "Получить TTH каталога...", выбираем каталог. Копируем магнет-ссылку.
По этой магнет-ссылке пользователи смогут найти каталог в шаре пользователя <b>greylink</b>, если он
имеет аналогичное содержимое, как в той шаре, где сделана ссылка. Имена файлов
не влияют на хеш, важны только структура подкаталогов и содержимое файлов (то есть,
файлы можно переименовывать, но нельзя изменять, добавлять, удалять,
перемещать в подкаталоги файлы, чтобы ссылка не изменилась)

<a name='dcls'/>
<h5>Способ 2</h5>

Открываем свой список, на нужном каталоге из контекстного меню
выбираем "Generate sublist". Получается файл с расширением .dcls
Раздаём всем magnet-ссылку на этот файл. Когда кто-то скачивает файл в <b>greylink</b>, он
автоматически открывается и можно выбрать "Download/DownloadTo"
на каталоге верхнего уровня (а можно и на любых других каталогах/файлах).

Автоматическое добавление содержимого .dcls в очередь закачек не сделано,
чтобы защититься от недобросовестных пользователей, которые будут
подкладывать вглубь своей шары файлы со ссылками
на всякий ненужный мусор.

<ul><b>Установка приоритетов на раздачу файлов</b></ul>
Задайте группы файлов и для каждой группы установите число дополнительных
слотов отдачи. Если все основные слоты заняты и клиент пробует скачать
файл из группы, выделяется слот из резерва группы. Таким образом, вы можете
выразить свои предпочтения, что будут скачивать с вас в первую очередь<br/>
<img src='img/addslots_2.png'/> &nbsp;
<img src='img/addslots_1.png' border=1/><br/>
Некоторые группы могут быть настроены так, чтобы при запросе файла
из группы не применялся авто-бан (по размеру шары и т.п.), не применялось
ограничение скорости (Ограничение скорости = SU) или применялось заданное в кБ/сек ограничение.
<p/>При желании пользователя группы с картинками и слотами (второе-опционально) отображаются в файл-списке.
Так что другие пользователи сети смогут увидеть, какие файлы получить легче
(если вы разрешили экспорт групп в файл-лист и просмотр листа осуществляется с помощью <b>greylink</b>).

<ul><b>Улучшена наглядность списка отдаваемых файлов</b></ul>
Для каждой отдачи отображается значок причины разрешения отдачи:<br/>
<ol>
<li><img src='img/up1.png'/>&nbsp;Без очереди (файл-лист)</li>
<li><img src='img/up2.png'/>&nbsp;Без очереди (TTH leaves)</li>
<li><img src='img/up3.png'/>&nbsp;В порядке очереди</li>
<li><img src='img/up4.png'/>&nbsp;Мини-слот</li>
<li><img src='img/up5.png'/>&nbsp;Экстра-слот</li>
<li><img src='img/up6.png'/>&nbsp;Авто-слот у фаворит-юзера</li>
<li><img src='img/up7.png'/>&nbsp;Обмен слотами</li>
<li><img src='img/up9.png'/>&nbsp;Слот из группы</li>
<li><img src='img/up8.png'/>&nbsp;Слот из-за недогруженности upload канала</li>
<li><img src='img/up10.png'/>&nbsp;Слот пользователю с большим балансом</li>
<li><img src='img/up11.png'/>&nbsp;Передача приватных файлов</li>
</ol>

<ul><b>Поддержка кодировки UTF-16 при передаче магнет-ссылок из браузера.</b></ul>
Примеры ссылок, которые неправильно перехватываются другими DC-клиентами из Internet Explorer (портится название файла)<br>
<a href="magnet:?xt=urn:tree:tiger:NTF3XJDES5MRJTXVSJOAGFQWLTGUKOOMM75L6QY&xl=723172224&dn=%D0%A0%D0%BE%D0%B1%D0%BE%D0%BA%D0%BE%D0%BF-2.avi">Робокоп-2.avi</a><br>
<a href="magnet:?xt=urn:tree:tiger:NTF3XJDES5MRJTXVSJOAGFQWLTGUKOOMM75L6QY&xl=723172224&dn=Робокоп-2.avi">Робокоп-2.avi</a>
<br/>
<img src='img/badmagnet1.png'/>
<img src='img/badmagnet2.png'/>

<a name='fastmsg'/>
<ul><b>Набор заранее заготовленных сообщений для чата</b></ul>
Составляется в файле <i>Settings/CustomMessages.ini</i>. Сообщения,
которые начинаются со знака '$', отсылаются сразу и не изменяют
содержимого строки, в которой набирается сообщение
<p/><img src='img/usermsg.png'/>

<ul><b>Загрузка содержимого папки из окна поиска</b></ul>
Позволяет быстро посмотреть содержимое определённой папки из строки поиска, на закачивая весь
файл-лист.<br/>
<img border=1 src='img/sr_query.png'/>
<img border=1 src='img/sr_result.png'/>

<a name='hubsettings'/>
<ul><b>Продвинутые настройки избранного хаба</b></ul>
Полностью переписано управление настройками.
Для хаба можно переопределить абсолютно любую настройку (за исключением глобальных: шара, ограничения скоростей),
от параметров подключения и формата логов до цветов и звуков.
(При настройке избранного хаба открывается привычный диалог с настройками клиента, в
котором выбираются индивидуальные настройки хаба).
Совместимость файла настроек с предыдущими версиями и другими клиентами только односторонняя

<a name='customshare'/>
<ul><b>Разные шары на разных хабах</b></ul>
Интуитивно понятно настраивается из свойств Избранного Хаба на  странице шары.
Также можно подключить чей-то файл-лист и выдать за свой.

<br/><br/>При использовании отдельного файл-листа действуют правила:<br/>
<li>Если в шаре не окажется файла, который есть в списке файлов,
<b>greylink</b> на попытку отдать файл будет реагировать сообщением "<i>нет слотов</i>", что можно
использовать для более эффективной подделки шары, чем генерация случайных файлов.
Скачав чей-то файл-лист и указав его в качестве используемого, получим хорошую шару.
Если в реальной шаре будут файлы из поддельной, то они будут отдаваться, что ещё
сильнее запутает модераторов хаба</li>
<li>Перечитывание содержимого файлов происходит по команде "<i>обновление шары</i>",
поэтому важно инициировать обновление после замены файлов</li>

<a name='vpn'/>
<ul><b>Соединения между клиентами через сеть, отличную от сети хаба</b></ul>
Типичные сценарии, когда IP прямого соединения не должен совпадать с тем IP, который отправлен хабу:
<ol>
<li>Хаб доступен обоим клиентам, но клиенты между собой напрямую не могут подключаться (только через VPN и т.п.)</li>
<li>Хаб находится в локальной сети, но доступен из интернета и хочется настроить файлообмен с интернет-пользователем</li>
<li>Клиент подключен к нескольким локальным сетям с перекрывающимися адресами</li>
</ol>
<p/>Как это работает:<br/>
Клиенты должны обменяться информацией, в каких сетях они находятся и своими IP-адресами в каждой сети.
Для этого пользователи назначают сетям идентификаторы (придерживаясь одинаковых соглашений,
например, сеть на VPN-сервере vpn.conn.ru и порту 111 назовут vpn://vpn.conn.ru:111 или просто conn-vpn,
лишь бы у всех называлась одинаково). Информация о сетях может выставляться в поле "описание" хаба или,
если на хабе запрещены такие описания, строка с конфигом сети вручную передаётся в личку командой <b>/net</b> - клиент
на другой стороне автоматически распознает конфигурацию<br/>
После этого, если клиенты находятся в одинаковых сетях, они используют заданные IP-адреса внутри сети для соединений между собой.
<p/>
Примеры настроек для рассмотренных выше случаев:
<ol>
<li><u>Хаб доступен обоим клиентам, но клиенты между собой напрямую не могут подключаться</u><br/>
Клиент заполняет конфиг сети строкой: &quot;<b>vpn.conn.ru=192.168.17.6,world=89.110.55.13</b>&quot; <br/>
где 192.168.17.6 - адрес, выданный сервером vpn.conn.ru, 89.110.55.13 - адрес, доступный из интернета
(для данного примера это не нужно, но пригодится в следующем)</li>
<li><u>Хаб находится в локальной сети, но доступен из интернета и хочется настроить файлообмен с интернет-пользователем</u><br/>
Хаб видит адрес пользователя как 10.0.3.6 (а то и 127.0.0.1, если установлен на машине пользователя), но этот адрес не
подойдёт для внешних подключений. Поэтому пользователь сети 10.0.3.x прописывает у себя строку &quot;<b>world=89.110.55.13</b>&quot;, а
интернет-пользователь - строку &quot;<b>world=0.0.0.0</b>&quot;, указывая, что он подключен к сети с меткой "world", но IP-адрес
не нуждается в преобразовании.
</li>
<li><u>Клиент подключен к нескольким локальным сетям с перекрывающимися адресами</u>
<p/>Проблема описана в следующем письме:
<table width="70%"><tr><td bgcolor=#A0A0A0>
Есть 2 сетевые карты, к которым подключены Сеть1 и Сеть2 с компьютерами имеющими одинаковые адреса. Такие компьютеры не могут быть одновременно доступны для обмена информацией, поэтому приходится делать выбор какие адреса оставить для обмена, добавляя соответствующие маршруты. Но попытаемся обойти это ограничение и на Интерфейсе1 между Сеть1 и нашим компьютером поставим роутер под Linux. Когда ему приходит пакет, например с диапазона 10.10.x.x (конфликтующий), он заменяет в поле адреса пакета 10.10.x.x, допустим, на 10.20.x.x (свободный не конфликтующий). Наш компьютер в результате думает, что ему пришел пакет из Сети1 с адресом отправителя 10.20.x.x. Он его обрабатывает и отсылает назад, а мы прописали в роутинг, что шлюз для 10.20.x.x - Интерфейс1 (Сеть1). Роутер на выходе ловит пакет и проводит над ним обратную операцию - заменяет 10.20.x.x на 10.10.x.x и шлет дальше в Сеть1. Т.е. мы делаем SNAT на роутере под linux, исключая конфликт адресов. Однако при заходе в Сети1 на DC++ хаб последний передает список всех присутствующих и их реальные IP адреса. И наш DC++ клиент будет пытаться соединиться именно с теми адресами, которые дал ему хаб, не производя замену. Для нормальной работы клиента требуется указать в свойствах хаба заменять IP адреса, которые он передает, на свои по определенному правилу: в данном примере 10.10.x.x на 10.20.x.x. Т.е. в свойствах хаба в разделе "Connection settings" в поле "VPN and networks config" добавить возможность указывать строки вида "conv1=10.10.0.0/16~10.20.0.0/16", "conv2=192.168.0.0/20~192.168.100.0/20" и т.д. для каждого конфликтующего диапазона.
</td></tr></table>

В данном случае необходимо прописать правило <b>10.10.0.0/16~10.20.0.0,192.168.0.0/20~192.168.100.0</b><br/>
Не забывайте также преобразовывать адреса UDP-пакетов, чтобы поисковые ответы уходили
в другую сеть. Для такой схемы нужно использовать пассивный режим
</li>
</ol>


<ul><b>А также...</b></ul>
Отображение частичных (у которых файл в процессе скачивания) источников в поиске<br/>
Анимированые смайлы<br/>
Красивый прогресс хеширования в главном окне программы<br/>
<a name='hashstat'/>
<img src='img/hashstat.png'><br/>

Много улучшений интерфейса, идеи которых мы собрали на разных форумах. Ищите, пользуйтесь!

</BODY></HTML>